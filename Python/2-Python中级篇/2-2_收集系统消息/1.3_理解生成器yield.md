# 生成器，yield
## yield
- 生成器是一个可迭代的对象，可以对迭代进行遍历，如字符串、序列都是可迭代的对象
- 当调用这个函数的时候，函数内部的代码并不会立即执行，这个函数只返回一个生成器对象
- 当使用for循环或者是生成器的next方法，里面的代码才会被执行

##yield与return的区别
- return的时候这个函数的局部变量都被销毁了
- 所有return的得到结果之后才会被返回
- yield产生了一个可恢复的函数(生成器)，恢复了局部变量
- 生成器只有在调用.next()方法，才会执行函数代码，生成一个结果

```
#!/usr/bin/env python
34 #-*- coding:utf8 -*-
33 
32 import os
31 import sys
30 import hashlib
29 
28 def md5sum(file):
27     md5 = hashlib.md5()
26     fd = open(file)
25     while True:
24         data = fd.read( 1024 * 4 )
23         if data:
22             md5.update(data)
21         else:
20             break
19     fd.close()
18 
17     return md5.hexdigest()
16 
15 def file_md5( topdir ):
14     pdf = os.walk(topdir)
13 
12     for root, dirs, files in pdf:
11         for name in files:
10             #print os.path.join( root, name )
9             filename = os.path.join(root, name)
8             md5_sum = md5sum(filename) 
7             yield "%s  %s" % (md5_sum, filename)
6     
5 if '__main__' == __name__:
4     try:
3         topdir = sys.argv[1] 
2     except IndexError:
1         print "%s must be append 1 args" % sys.argv[0]
36          sys.exit()
1     gen = file_md5( topdir )
2     
3     for i in gen:
4         print i
```
运行结果
```
✗ python 1.2_os_walk_with_yield.py
1.2_os_walk_with_yield.py must be append 1 args
✗ python 1.2_os_walk_with_yield.py /tmp/test 
e4a8d1513add8ef5f4ac799bd4c781cb  /tmp/test/b
ff4c8ff01d544500ea4bfea43e6108c1  /tmp/test/a
```
